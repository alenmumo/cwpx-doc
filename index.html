<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CWPX CGI: cwpx_cgi</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="cwpx_globe.ico"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CWPX CGI
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">cwpx_cgi </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><em>Biblioteca para desarrollo web en C siguiendo conceptos similares a PHP, JSP, ASP.NET y Django.</em></p>
<h1><a class="anchor" id="autotoc_md1"></a>
Comenzando üöÄ</h1>
<p><em>Estas instrucciones te permitir√°n poner en funcionamiento el proyecto en tu m√°quina local para prop√≥sitos de desarrollo y pruebas.</em></p>
<h2><a class="anchor" id="autotoc_md2"></a>
Pre-requisitos üìã</h2>
<p><em>Para utilizar el software se necesita un servidor web con soporte para CGI. En este proyecto se utiliza Apache.</em></p>
<div class="fragment"><div class="line">* Instalar Apache en Windows</div>
<div class="line">  [Apache](https://sourceforge.net/projects/apache2portable/) - Apache Portable para Windows</div>
<div class="line">  </div>
<div class="line">  Luego de la &quot;instalaci√≥n&quot; se debe configurar el archivo ApachePortable/conf/httpd.conf para configurar la ejecuci√≥n de CGI en el directorio web del servidor. La extensi√≥n para los archivos CGI ser√° &quot;.cwpx&quot;:</div>
<div class="line">  </div>
<div class="line">  &lt;Directory &quot;C:/ApachePortable/htdocs&quot;&gt;</div>
<div class="line">    # Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews</div>
<div class="line">    Options Indexes FollowSymLinks ExecCGI</div>
<div class="line">    AllowOverride All</div>
<div class="line">    Order allow,deny</div>
<div class="line">    Allow from all</div>
<div class="line"> </div>
<div class="line">    AddHandler cgi-script .cwpx</div>
<div class="line">  &lt;/Directory&gt;</div>
<div class="line">  </div>
<div class="line">  En este caso, el directorio web del servidor ser√° &quot;C:/ApachePortable/htdocs&quot;</div>
<div class="line">  </div>
<div class="line">  </div>
<div class="line">  </div>
<div class="line">* Instalar Apache en Linux (Ubuntu)</div>
<div class="line">  sudo apt-get install apache2</div>
<div class="line">  </div>
<div class="line">  Luego de la instalaci√≥n se debe configurar el archivo /etc/apache2/sites-available/default para configurar la ejecuci√≥n de CGI en el directorio web del servidor:</div>
<div class="line">  </div>
<div class="line">  &lt;VirtualHost *:80&gt;</div>
<div class="line">    ...</div>
<div class="line">    &lt;Directory /var/www/&gt;</div>
<div class="line">      Options ... ExecCGI</div>
<div class="line">      ...</div>
<div class="line">      AddHandler cgi-script .cwpx</div>
<div class="line">      </div>
<div class="line">      </div>
<div class="line">  Para confirmar los cambios se debe reiniciar el servidor web:</div>
<div class="line">    sudo service apache2 restart</div>
<div class="line">    </div>
<div class="line">    </div>
<div class="line">  En este caso, el directorio web del servidor ser√° &quot;/var/www&quot;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">* Instalar Apache en Mac (Mountain Lion):</div>
<div class="line">  Apache viene pre-instalado en Mountain Lion, solamente se debe iniciar el servicio:</div>
<div class="line">  sudo apachectl start</div>
<div class="line">  </div>
<div class="line">  Luego, se debe configurar el archivo /etc/apache2/httpd.conf para configurar la ejecuci√≥n de CGI en el directorio web del servidor, como se observa en la secci√≥n de Ubuntu.</div>
<div class="line">  </div>
<div class="line">  En este caso, el directorio web del servidor ser√° &quot;/Library/WebServer/Documents&quot;</div>
<div class="line">  </div>
<div class="line">  </div>
<div class="line">Nota: Las rutas y nombres de los archivos del servidor Apache podr√≠an variar de un sistema a otro.</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md3"></a>
Instalaci√≥n üîß</h2>
<p><em>Para tener un entorno de desarrollo ejecut√°ndose, adem√°s de la instalaci√≥n un servidor web y su respectiva configuraci√≥n para ejecutar CGI, se debe configurar el sistema para que reconozca la ruta donde se encuentra la biblioteca del marco de desarrollo.</em></p>
<p><em>Para compilar la biblioteca utilice los siguientes comandos:</em></p>
<div class="fragment"><div class="line">cd cwpx_cgi</div>
<div class="line"> </div>
<div class="line">make</div>
</div><!-- fragment --><p><em>O bien, :</em></p>
<div class="fragment"><div class="line">make -f &quot;Makefile - Windows&quot;</div>
</div><!-- fragment --><p><em>Tambi√©n puede descargar una imagen de Docker con un entorno Linux+Apache+GCC con la configuraci√≥n instalada:</em></p>
<div class="fragment"><div class="line">docker pull enrmng6/cwpx_image:latest</div>
</div><!-- fragment --><p><em>Los comandos anteriores crean archivos importantes en la carpeta <b>lib</b>: cwpx_core.dll (o libcwpx_core.so) y cwpx_interface.o. Esos dos archivos deber√°n ser referenciados a la hora de compilar los scripts CGI. Adem√°s, la ruta de la carpeta <b>lib</b>, en especial la biblioteca cwpx_core.dll (o libcwpx_core.so) debe ser configurada para que sea reconocida por el servidor web, como se indic√≥ anteriormente.</em></p>
<p><em>Los archivos CGI compilados deben ser colocados en el directorio web del servidor, ya sea en una carpeta exclusiva para archivos CGI, o en cualquier ruta del directorio web. Los CGI compilados utilizan la biblioteca del marco de desarrollo, la cual es una biblioteca din√°mica y por lo tanto, al ser ejecutados se les debe especificar la ruta donde se encuentra la biblioteca. En algunos sistemas opertativos, por el momento, las pruebas se est√°n realizando colocando la biblioteca (el .dll o el .so) en la misma carpeta donde se ejecuta el CGI. Tambi√©n, se puede establecer la ruta de la biblioteca en una variable de entorno como "PATH".</em></p>
<p><em>En Ubuntu, colocar la biblioteca en la misma carpeta que el CGI no funciona, ni tampoco establecer la ruta de la biblioteca en la variable de entorno "PATH", ni establecer la variable de entorno "LD_LIBRARY_PATH". Como soluci√≥n, se puede crear un archivo en la ruta /etc/ld.so.conf.d, por ejemplo, /etc/ld.so.conf.d/cwpx.conf. El contenido del archivo ser√° la ruta donde se encuentra la biblioteca:</em></p>
<div class="fragment"><div class="line">coloque_aqu√≠_la_ruta_absoluta_sin_comillas</div>
</div><!-- fragment --><p><em>Luego de guardar los cambios en el archivo /etc/ld.so.conf.d/cwpx.conf, se ejecuta el siguiente comando para cargar la biblioteca en el sistema:</em></p>
<div class="fragment"><div class="line">ldconfig</div>
</div><!-- fragment --><p><em>En la carpeta <b>include</b> se encuentran los archivos de encabezado (header files) que deber√°n ser inclu√≠dos mediante la directiva **#include** en un archivo C. En <b>lib</b> se encuentran los archivos binarios que deber√°n ser especificados en la compilaci√≥n de los archivos C. En la carpeta <b>test</b> se encuentran ejemplos de scripts CGI utilizando el marco de desarrollo.</em></p>
<h1><a class="anchor" id="autotoc_md4"></a>
Desarrollando los scripts ‚öôÔ∏è</h1>
<p><em>En esta secci√≥n se explica c√≥mo crear los scripts en C que utilizan el marco de desarrollo</em></p>
<h2><a class="anchor" id="autotoc_md5"></a>
Crear y compilar los scripts üî©</h2>
<p><em>En la carpeta <b>test</b> ya hay ejemplos de scripts. Para crear un script nuevo, cree un archivo C nuevo, por ejemplo, <b>prueba.c</b>. Coloque el siguiente c√≥digo:</em></p>
<div class="fragment"><div class="line">#include &lt;cwpx.h&gt;</div>
<div class="line"> </div>
<div class="line">void do_http(Request request, Response response){</div>
<div class="line">    </div>
<div class="line">    response.write(&quot;Hola Mundo ...&quot;);</div>
<div class="line">    </div>
<div class="line">    return;</div>
<div class="line">}</div>
</div><!-- fragment --><p><em>Para compilar el script utilice el siguiente comando (cambie las rutas si es necesario):</em></p>
<div class="fragment"><div class="line">gcc -I&quot;../include&quot; prueba.c -o prueba.cwpx -L&quot;../lib&quot; -lcwpx</div>
</div><!-- fragment --><p><em>Si no ocurri√≥ ning√∫n error, ahora se cuenta con un archivo llamado <b>prueba.cwpx</b></em></p>
<h2><a class="anchor" id="autotoc_md6"></a>
Probar los scripts ‚å®Ô∏è</h2>
<p><em>El archivo generado con la compilaci√≥n es el archivo que debe ser probado. Al tratarse de CGI, se puede probar el archivo ejecut√°ndolo directamente desde una terminal o l√≠nea de comandos. Sin embargo, un servidor web establece variables de entorno y algunas otras configuraciones necesarias para ejecutar los CGI que no pueden ser emuladas f√°cilmente en una l√≠nea de comandos, por lo que lo mejor ser√° probar el script directamente desde un servidor web.</em></p>
<p><em>Habiendo configurado la ruta de la carpeta <b>lib</b> para que sea reconocida por el servidor web, el archivo compilado <b>prueba.cwpx</b> se coloca en el directorio web del servidor (o en la ruta espec√≠fica para scripts CGI). Luego, mediante un cliente web como por ejemplo un navegador web, se realiza una solicitud al archivo:</em></p>
<div class="fragment"><div class="line">http://localhost/mis_scripts/prueba.cwpx</div>
</div><!-- fragment --><p><em>Si todo march√≥ bien. se mostrar√° el resultado del script, de otro modo se mostrar√° un error "500 Internal Server Error" o "404 Not Found".</em></p>
<h1><a class="anchor" id="autotoc_md7"></a>
Despliegue üì¶</h1>
<p><em>El despliegue se realiza de manera "natural", es decir, los archivos compilados son colocados directamente en el directorio web del servidor y estar√°n inmediatamente disponibles para cuando el recurso sea solicitado por un cliente web.</em></p>
<h1><a class="anchor" id="autotoc_md8"></a>
Construido con üõ†Ô∏è</h1>
<p><em>Para el desarrollo de este proyecto se utilizaron las siguientes herramientas:</em></p>
<ul>
<li><a href="https://notepad-plus-plus.org/, https://wiki.gnome.org/Apps/Gedit, https://developer.apple.com/xcode/">NotePad++, GEdit, Xcode</a> - Para escribir el c√≥digo C</li>
<li><a href="https://www.mingw-w64.org/, https://gcc.gnu.org/, https://clang.llvm.org/">MinGW, GCC, CLang</a> - Para compilar el c√≥digo C</li>
<li><a href="https://www.apache.org/">Apache</a> - Para ejecutar el c√≥digo C en la Web</li>
</ul>
<h1><a class="anchor" id="autotoc_md9"></a>
Contribuyendo üñáÔ∏è</h1>
<p>Por favor lee el <a href="https://gist.github.com/alenmumo/xxxxxx">CONTRIBUTING.md</a> para detalles de nuestro c√≥digo de conducta, y el proceso para enviarnos pull requests.</p>
<h1><a class="anchor" id="autotoc_md10"></a>
Wiki üìñ</h1>
<p>Puedes encontrar mucho m√°s de c√≥mo utilizar este proyecto en nuestra <a href="https://github.com/alenmumo/cwpx_cgi/wiki">Wiki</a></p>
<h1><a class="anchor" id="autotoc_md11"></a>
Versionado üìå</h1>
<p>Usamos <a href="https://github.com">GitHub</a> para el versionado.</p>
<h1><a class="anchor" id="autotoc_md12"></a>
Autores ‚úíÔ∏è</h1>
<p>_._</p>
<ul>
<li><b>Alejandro Enrique Mu√±oz Monge</b> - <em>Trabajo Inicial</em> - <a href="https://github.com/alenmumo">alenmumo</a></li>
</ul>
<p>Tambi√©n puedes mirar la lista de todos los <a href="https://github.com/alenmumo/cwpx_cgi/contributors">contribuyentes</a> quienes han participado en este proyecto.</p>
<h1><a class="anchor" id="autotoc_md13"></a>
Licencia üìÑ</h1>
<p>Este proyecto est√° bajo la Licencia (Tu Licencia) - mira el archivo LICENSE.md para detalles</p>
<h1><a class="anchor" id="autotoc_md14"></a>
Expresiones de Gratitud üéÅ</h1>
<ul>
<li>Comenta a otros sobre este proyecto üì¢</li>
<li>Invita una cerveza üç∫ o un caf√© ‚òï a alguien del equipo.</li>
<li>Da las gracias p√∫blicamente ü§ì.</li>
<li>etc.</li>
</ul>
<hr  />
<p> ‚å®Ô∏è con ‚ù§Ô∏è por <a href="https://github.com/alenmumo">cwpx</a> üòä </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
